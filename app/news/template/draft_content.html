{% extends "base.html" %}

{% block navbar %}
{% if user.is_authenticated %}
  {% include "logged-nav.html" %}
{% else %}
  {% include "general-nav.html" %}
{% endif %}
{% endblock %}

{% block content %}
        <div class="row">
            <div class="col-md-8">
              <div class="row">
                  <h1>{{draft.title}}</h1>
                  
                  <div class="col-md-12 p-1">
                    Tags:
                    {% for tag in draft.tags.all %}
                        {{ tag.name }}
                        {% if not forloop.last %},{% endif %}
                    {% endfor %}
                  </div>
                
                  {% if draft.image %}
                    <img class="img-fluid mx-auto p-2 content-image" src="/media/{{draft.image}}"">
                  {% else %}
                    <img class="img-fluid" src="https://via.placeholder.com/900x400">
                  {% endif %}
                  
                  <br>
                  <br>
                  <style>
                    /* Apply a fixed width of 300 pixels to the div */
                    .fixed-width-div {
                      width: 900px;
                      /* Add other styles as needed */
                      background-color: #f0f0f0;
                      border-radius: 15px;
                      padding: 10px;
                      margin: 10px;
                    }
                  </style>
                <div class = "fixed-width-div">
                  <p class="p-2">
                    {{ draft.content|safe }}
                </p>
              </div>
                  <br>
                  <br>
                <div>
                  <!-- Edit Button -->
                    {% if not user.is_staff and user.is_authenticated %}
                      <a href="{% url 'edit-draft' draft.id %}" class="btn btn-primary">Edit</a>
                    {% endif %}
                    {% if user.is_superuser or user.is_authenticated and user.is_staff %}
                    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteConfirmationModal">
                      Approve
                    </button>
                    {% endif %}
                    <br>
                    <br>
                    <br>
                  </div>    
    
             
        <!-- Confirmation Modal -->
        <div class="modal fade" id="deleteConfirmationModal" tabindex="-1" role="dialog" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">
                  <div class="modal-header">
                      <h5 class="modal-title" id="deleteConfirmationModalLabel">Confirm Approval</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                      </button>
                  </div>
                  <div class="modal-body">
                      Are you sure you want to publish this news draft?
                  </div>
                  <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                      <a href="{% url 'approve-draft' draft.id %}" class="btn btn-danger">Confirm</a>
                  </div>
              </div>
          </div>
        </div>

{% endblock %}
